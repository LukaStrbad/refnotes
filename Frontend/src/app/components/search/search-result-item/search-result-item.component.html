<div class="flex gap-2 items-center">
  <div
    class="flex items-center gap-1 min-w-0 flex-shrink cursor-pointer"
    [routerLink]="isViewable ? '/preview' : null"
    [queryParams]="{ directory: dirPath, file: filename }"
  >
    <span
      class="overflow-hidden whitespace-nowrap text-ellipsis min-w-0 block"
      >{{ filename }}</span
    >
    <span class="badge badge-xs">{{ dirPath }}</span>
  </div>

  <!-- Only show results if tags intersect -->
  <div class="flex gap-1 items-center">
    @for (tag of calculateTagIntersection(); track tag) {
      <span class="badge badge-xs badge-primary">{{ tag }}</span>
    }

    @if (item.foundByFullText) {
      <span class="badge badge-xs badge-primary badge-soft">text</span>
    }
  </div>

  <div class="ml-auto flex gap-2">
    <!-- Edit icon -->
    @if (isEditable) {
      <a
        class="btn btn-primary btn-soft btn-xs btn-circle"
        routerLink="/editor"
        [queryParams]="{ directory: dirPath, file: filename }"
      >
        <i class="bi bi-pencil"></i>
      </a>
    }

    <!-- Folder icon -->
    <a
      class="btn btn-secondary btn-soft btn-xs btn-circle"
      routerLink="/browser{{ dirPath }}"
    >
      <i class="bi bi-folder"></i>
    </a>
  </div>
</div>
